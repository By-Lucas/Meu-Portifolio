{% extends 'administracao.html' %}
{% load static %}
{% load bootstrap %}

{% block admin %}
<div class="container">
    <h1><strong>Todos os projetos:</strong></h1>
    <div class=" col-5 text-center">
        {{ message }}
        <br>
        {% if messages %}
            {% for message in messages %}
                <div class="alert {{message.tags}}">
                    {{message}}
                </div>
            {% endfor %}
        {% endif %}
    </div>

    <div class="row col-md-8">
        <table class="table table-bordered table-dark">
            <thead>
                <tr>
                <th scope="col">ID</th>
                <th scope="col">Nome</th>
                <th scope="col">Opções</th>
                </tr>
            </thead>
            <tbody>
                {% for projeto in projetos %}
                    <tr>
                        <th scope="row" class="col-md-1"><h2>{{projeto.id}}</h2></th>
                        {% if projeto.img_projeto %}
                            <td class="col-md-3">
                                <img style="border-radius: 5px; width: 100%; height: 150px;" src="{{projeto.img_projeto.url}}" alt=""> 
                                <h2>{{projeto.nome}}</h2>
                            </td>
                        {% else %}
                            <td>{{projeto.nome}}</td>
                        {% endif %}
                        <td class="col-md-2">
                            <div class="row">
                                <div class="col-sm">
                                    <a href="{% url 'editar_projeto' projeto.id %}" class="btn btn-outline-primary" style="width: 100%; margin-bottom: 10px;">Editar</a>
                                    <br>
                                    <a href="{% url 'deletar_projeto' projeto.id %}" class="btn btn-outline-danger" style="width: 100%;">Deletar</a>
                                </div>
                            </div>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        
        <div class="pagination">
            <span class="step-links">
                {% if clientes_todos.has_previous %}
                    <a href="?page=1">&laquo; Primeira</a> |
                    <a href="?page={{ clientes_todos.previous_page_number }}&q={% if  request.GET.q %}{{ request.GET.q }}{% endif %}">Anterio</a>
                {% endif %}
    
                <span class="current">
                    Página {{ clientes_todos.number }} de {{ clientes_todos.paginator.num_pages }}.
                </span>
    
                {% if clientes_todos.has_next %}
                    <a href="?page={{ clientes_todos.next_page_number }}&q={% if  request.GET.q %}{{ request.GET.q }}{% endif %}">Próximo</a> |
                    <a href="?page={{ clientes_todos.paginator.num_pages }}"> Ultima &raquo;</a>
                {% endif %}
            </span>
            </div>
        </div>
    </div>
</div>
{% endblock %}